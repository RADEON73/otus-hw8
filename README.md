# otus-hw8

Описание программы
Программа предназначена для поиска и сравнения файлов в указанных директориях. Она позволяет задавать параметры сканирования, такие как глубина сканирования, минимальный размер файла, маски файлов и алгоритм хэширования для сравнения содержимого файлов.

Команды запуска
Программа принимает следующие аргументы командной строки:

--help - Выводит справку по доступным командам.

--directories - Список директорий для сканирования (обязательный параметр).

--exclude - Список директорий для исключения из сканирования.

--level - Глубина сканирования (по умолчанию 0 - только текущая директория).

--masks - Маски файлов для фильтрации (по умолчанию все файлы).

--min-size - Минимальный размер файла в байтах (по умолчанию 1).

--block-size - Размер блока для чтения файлов в байтах (по умолчанию 1024).

--hash - Алгоритм хэширования для сравнения файлов (по умолчанию crc32, доступные значения: crc32, md5).

--delete - Удалять ли все дубликаты кроме первого в списке ( по умолчанию - false, доступные значения true/false

Пример аргументов запуска:
--directories /path/to/dir1 /path/to/dir2 --exclude /path/to/exclude --level 2 --masks .txt .log --min-size 1024 --block-size 4096 --hash md5
Этот пример запускает программу с указанием двух директорий для сканирования, исключает одну директорию, задает глубину сканирования 2, фильтрует файлы по маскам .txt и .log, устанавливает минимальный размер файла 1024 байта, размер блока 4096 байт и использует алгоритм хэширования MD5.

ТЗ:

bayan

Условие
Пользуясь имеющимися в библиотеке Boost структурами и алгоритмами
разработать утилиту для обнаружения файлов-дубликатов.
Утилита должна иметь возможность через параметры командной строки
указывать
• директории для сканирования (может быть несколько)
• директории для исключения из сканирования (может быть несколько)
• уровень сканирования (один на все директории, 0 - только указанная
директория без вложенных)
• минимальный размер файла, по умолчанию проверяются все файлы
больше 1 байта.
• маски имен файлов разрешенных для сравнения (не зависят от
регистра)
• размер блока, которым производится чтения файлов, в задании этот
размер упоминается как S
• один из имеющихся алгоритмов хэширования (crc32, md5 -
конкретные варианты определить самостоятельно), в задании
эта функция упоминается как H
Результатом работы утилиты должен быть список полных путей файлов
с идентичным содержимым, выводимый на стандартный вывод. На одной
строке один файл. Идентичные файлы должны подряд, одной группой.
Разные группы разделяются пустой строкой.
Обязательно свойство утилиты - бережное обращение с дисковым вводом
выводом. Каждый файл может быть представлен в виде списка блоков
размера S. Если размер файла не кратен, он дополняется бинарными
нулями.
Файл world.txt из одной строки
Hello, World\n
При размере блока в 5 байт, будет представлен как
Hello
, Wor
ld\n\0\0
Каждый блок должен быть свернут выбранной функцией хэширования.
Возможные коллизии игнорируются. Из предположения, что
H("Hello") == A
H(", Wor") == B
H("ld\n\0\0") == C
1
Наш файл world.txt может быть представлен в виде последовательности
ABC
Рассмотрим второй файл cpp.txt
Hello, C++\n
Который после хэширования блоков
H("Hello") == A
H(", C++") == D
H("\n\0\0\0\0") == E
может быть представлен в виде последовательности ADE
Порядок сравнения этих файлов должен быть максимально бережным. То
есть обработка первого файла world.txt вообще не приводит к чтению с
диска, ведь нам еще не с чем сравнивать. Как только мы добираемся до
файла cpp.txt только в этот момент происходит перое чтение первого блока
обоих файлов. В данном случае блоки идентичны, и необходимо прочесть
вторые блоки, которые уже различаются. Файлы различны, оставшиеся
данные не читаются.
Файлы считаются идентичными при полном совпадении последовательности
хешей блоков.
Самоконтроль
• блок файла читается с диска не более одного раза
• блок файла читается только в случае необходимости
• не забыть, что дубликатов может быть больше чем два
• пакет bayan содержащий исполняемый файл bayan опубликован на
bintray
• описание параметров в файле README.md корне репозитория
• отправлена на проверку ссылка на страницу репозитория
Проверка
Задание считается выполнено успешно, если после просмотра кода,
подключения репозитория, установки пакета и запуска бинарного файла
командой (параметры из описания):
$ bayan [...]
будут обнаружены файлы-дубликаты, без ложных срабатываний и
пропуска существующих дубликатов.
Количество прочитанных данных с диска минимально